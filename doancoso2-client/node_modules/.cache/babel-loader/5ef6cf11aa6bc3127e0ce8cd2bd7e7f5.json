{"ast":null,"code":"import _objectSpread from\"E:/doan02/doancoso2-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createSlice}from\"@reduxjs/toolkit\";import{toast}from\"react-toastify\";var initialState={cartItems:localStorage.getItem(\"cartItems\")?JSON.parse(localStorage.getItem(\"cartItems\")):[],cartTotalQuantity:0,cartTotalAmount:0};var cartSlice=createSlice({name:\"cart\",initialState:initialState,reducers:{addToCart:function addToCart(state,action){var existingIndex=state.cartItems.findIndex(function(item){return item.id===action.payload.id;});if(existingIndex>=0){state.cartItems[existingIndex]=_objectSpread(_objectSpread({},state.cartItems[existingIndex]),{},{cartQuantity:state.cartItems[existingIndex].cartQuantity+1});toast.info(\"\".concat(state.cartItems[existingIndex].tenSP,\" t\\u0103ng th\\xEAm 1\"),{position:\"bottom-left\"});}else{if(action.payload.soluong<=0){toast.error(\"s\\u1EA3n ph\\u1EA9m \".concat(action.payload.tenSP,\" \\u0111\\xE3 h\\u1EBFt h\\xE0ng\"),{position:\"bottom-left\"});return;}var tempProductItem=_objectSpread(_objectSpread({},action.payload),{},{cartQuantity:1});state.cartItems.push(tempProductItem);toast.success(\"\".concat(action.payload.tenSP,\" v\\u1EEBa th\\xEAm v\\xE0o gi\\u1ECF\"),{position:\"bottom-left\"});}localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));},decreaseCart:function decreaseCart(state,action){var itemIndex=state.cartItems.findIndex(function(item){return item.id===action.payload.id;});if(!state.cartItems[itemIndex]){toast.warning(\"B\\u1EA1n ch\\u01B0a th\\xEAm s\\u1EA3n ph\\u1EA9m n\\xE0y\",{position:\"bottom-left\"});return;}if(state.cartItems[itemIndex].cartQuantity>1){state.cartItems[itemIndex].cartQuantity-=1;toast.info(\"\".concat(action.payload.tenSP,\" \\u0111\\xE3 gi\\u1EA3m 1\"),{position:\"bottom-left\"});}else if(state.cartItems[itemIndex].cartQuantity===1){var nextCartItems=state.cartItems.filter(function(item){return item.id!==action.payload.id;});state.cartItems=nextCartItems;toast.error(\"\".concat(action.payload.tenSP,\" \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c x\\xF3a kh\\u1ECFi gi\\u1ECF h\\xE0ng\"),{position:\"bottom-left\"});}localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));},removeFromCart:function removeFromCart(state,action){state.cartItems.map(function(cartItem){if(cartItem.id===action.payload.id){var nextCartItems=state.cartItems.filter(function(item){return item.id!==cartItem.id;});state.cartItems=nextCartItems;toast.error(\"\".concat(cartItem.tenSP,\" \\u0111\\xE3 b\\u1ECB x\\xF3a kh\\u1ECFi gi\\u1ECF h\\xE0ng\"),{position:\"bottom-left\"});}localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));return state;});},getTotals:function getTotals(state,action){var _state$cartItems$redu=state.cartItems.reduce(function(cartTotal,cartItem){var giaSP=cartItem.giaSP,cartQuantity=cartItem.cartQuantity,khuyenMaiNavigation=cartItem.khuyenMaiNavigation,giaKhuyenMai=cartItem.giaKhuyenMai;var itemTotal=khuyenMaiNavigation.sale>0?giaKhuyenMai*cartQuantity:giaSP*cartQuantity;cartTotal.total+=itemTotal;cartTotal.quantity+=cartQuantity;return cartTotal;},{total:0,quantity:0}),total=_state$cartItems$redu.total,quantity=_state$cartItems$redu.quantity;total=parseFloat(total.toFixed(2));state.cartTotalQuantity=quantity;state.cartTotalAmount=total;},clearCart:function clearCart(state,action){state.cartItems=[];localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));toast.error(\"Đã xóa tất cả sản phẩm trong giỏ\",{position:\"bottom-left\"});}}});var _cartSlice$actions=cartSlice.actions,addToCart=_cartSlice$actions.addToCart,decreaseCart=_cartSlice$actions.decreaseCart,removeFromCart=_cartSlice$actions.removeFromCart,getTotals=_cartSlice$actions.getTotals,clearCart=_cartSlice$actions.clearCart;export{addToCart,decreaseCart,removeFromCart,getTotals,clearCart};export default cartSlice.reducer;","map":{"version":3,"sources":["E:/doan02/doancoso2-client/src/features/cartSlice.js"],"names":["createSlice","toast","initialState","cartItems","localStorage","getItem","JSON","parse","cartTotalQuantity","cartTotalAmount","cartSlice","name","reducers","addToCart","state","action","existingIndex","findIndex","item","id","payload","cartQuantity","info","tenSP","position","soluong","error","tempProductItem","push","success","setItem","stringify","decreaseCart","itemIndex","warning","nextCartItems","filter","removeFromCart","map","cartItem","getTotals","reduce","cartTotal","giaSP","khuyenMaiNavigation","giaKhuyenMai","itemTotal","sale","total","quantity","parseFloat","toFixed","clearCart","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst initialState = {\r\n    cartItems: localStorage.getItem(\"cartItems\")\r\n        ? JSON.parse(localStorage.getItem(\"cartItems\")) : [],\r\n    cartTotalQuantity: 0,\r\n    cartTotalAmount: 0,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n    name: \"cart\",\r\n    initialState,\r\n    reducers: {\r\n        addToCart(state, action) {\r\n            const existingIndex = state.cartItems.findIndex(\r\n                (item) => item.id === action.payload.id\r\n            );\r\n            if (existingIndex >= 0) {\r\n                state.cartItems[existingIndex] = {\r\n                    ...state.cartItems[existingIndex],\r\n                    cartQuantity: state.cartItems[existingIndex].cartQuantity + 1,\r\n                };\r\n                toast.info(`${state.cartItems[existingIndex].tenSP} tăng thêm 1`, {\r\n                    position: \"bottom-left\",\r\n                });\r\n            } else {\r\n                if (action.payload.soluong <= 0) {\r\n                    toast.error(`sản phẩm ${action.payload.tenSP} đã hết hàng`, {\r\n                        position: \"bottom-left\",\r\n                    });\r\n                    return;\r\n                }\r\n                let tempProductItem = { ...action.payload, cartQuantity: 1 };\r\n                state.cartItems.push(tempProductItem);\r\n                toast.success(`${action.payload.tenSP} vừa thêm vào giỏ`, {\r\n                    position: \"bottom-left\",\r\n                });\r\n            }\r\n            localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\r\n        },\r\n        decreaseCart(state, action) {\r\n            const itemIndex = state.cartItems.findIndex(\r\n                (item) => item.id === action.payload.id\r\n            );\r\n\r\n            if (!state.cartItems[itemIndex]) {\r\n                toast.warning(`Bạn chưa thêm sản phẩm này`, {\r\n                    position: \"bottom-left\",\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (state.cartItems[itemIndex].cartQuantity > 1) {\r\n                state.cartItems[itemIndex].cartQuantity -= 1;\r\n\r\n                toast.info(`${action.payload.tenSP} đã giảm 1`, {\r\n                    position: \"bottom-left\",\r\n                });\r\n            } else if (state.cartItems[itemIndex].cartQuantity === 1) {\r\n                const nextCartItems = state.cartItems.filter(\r\n                    (item) => item.id !== action.payload.id\r\n                );\r\n\r\n                state.cartItems = nextCartItems;\r\n\r\n                toast.error(`${action.payload.tenSP} đã được xóa khỏi giỏ hàng`, {\r\n                    position: \"bottom-left\",\r\n                });\r\n            }\r\n            localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\r\n        },\r\n        removeFromCart(state, action) {\r\n            state.cartItems.map((cartItem) => {\r\n                if (cartItem.id === action.payload.id) {\r\n                    const nextCartItems = state.cartItems.filter(\r\n                        (item) => item.id !== cartItem.id\r\n                    );\r\n\r\n                    state.cartItems = nextCartItems;\r\n\r\n                    toast.error(`${cartItem.tenSP} đã bị xóa khỏi giỏ hàng`, {\r\n                        position: \"bottom-left\",\r\n                    });\r\n                }\r\n                localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\r\n                return state;\r\n            });\r\n        },\r\n        getTotals(state, action) {\r\n            let { total, quantity } = state.cartItems.reduce(\r\n                (cartTotal, cartItem) => {\r\n                    const { giaSP, cartQuantity, khuyenMaiNavigation, giaKhuyenMai } = cartItem;\r\n                    const itemTotal = khuyenMaiNavigation.sale > 0 ? giaKhuyenMai * cartQuantity : giaSP * cartQuantity\r\n\r\n                    cartTotal.total += itemTotal;\r\n                    cartTotal.quantity += cartQuantity;\r\n\r\n                    return cartTotal;\r\n                },\r\n                {\r\n                    total: 0,\r\n                    quantity: 0,\r\n                }\r\n            );\r\n            total = parseFloat(total.toFixed(2));\r\n            state.cartTotalQuantity = quantity;\r\n            state.cartTotalAmount = total;\r\n        },\r\n        clearCart(state, action) {\r\n            state.cartItems = [];\r\n            localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\r\n            toast.error(\"Đã xóa tất cả sản phẩm trong giỏ\", { position: \"bottom-left\" });\r\n        },\r\n    },\r\n});\r\n\r\nexport const { addToCart, decreaseCart, removeFromCart, getTotals, clearCart } =\r\n    cartSlice.actions;\r\n\r\nexport default cartSlice.reducer;\r\n"]},"metadata":{},"sourceType":"module"}