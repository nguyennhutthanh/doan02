{"ast":null,"code":"var _jsxFileName = \"D:\\\\DACS2 - DH18TIN03 - NguyenNhutThanh - 188672  Website_Ban_Do_Dung_Noi_That\\\\doancoso2-client\\\\src\\\\Components\\\\Checkout\\\\FormCheckout.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useForm, Form } from '../../../src/hooks/useForm';\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialFValues = {\n  idKhach: 0,\n  hoTen: '',\n  sdt: '',\n  diaChi: '',\n  email: '',\n  ghiChu: '',\n  soLuong: 0,\n  thanhTien: 0,\n  idCheckout: 0,\n  idSanPham: 0,\n  tongHoaDon: 0,\n  tongLuongSanPham: 0,\n  checkoutProduct: [],\n  tinh: '',\n  huyen: ''\n};\n\nconst FormCheckout = props => {\n  _s();\n\n  const {\n    addOrEdit,\n    selectThanhPho\n  } = props;\n  const dataCart = JSON.parse(localStorage.getItem(\"cartItems\"));\n  const dataCarts = useSelector(state => state.cart);\n  const user = JSON.parse(localStorage.getItem(\"info_user\"));\n\n  const validate = function () {\n    let fieldValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : values;\n    let temp = { ...errors\n    };\n\n    if (user === null) {\n      if ('hoTen' in fieldValues) temp.hoTen = fieldValues.hoTen ? \"\" : \"This field is required.\";\n      if ('sdt' in fieldValues) temp.sdt = fieldValues.sdt ? \"\" : \"This field is required.\";\n      if ('diaChi' in fieldValues) temp.diaChi = fieldValues.diaChi ? \"\" : \"This field is required.\";\n      if ('email' in fieldValues) temp.email = fieldValues.email ? \"\" : \"This field is required.\";\n    } else {\n      if ('ghiChu' in fieldValues) temp.ghiChu = fieldValues.ghiChu ? \"\" : \"This field is required.\";\n    }\n\n    setErrors({ ...temp\n    });\n    if (fieldValues == values) return Object.values(temp).every(x => x == \"\");\n  };\n\n  const [currentTinh, setCurrentTinh] = useState('');\n\n  const changeTinh = newTinh => {\n    setCurrentTinh(newTinh);\n  };\n\n  const [currentHuyen, setCurrentHuyen] = useState('');\n\n  const changeHuyen = newHuyen => {\n    setCurrentHuyen(newHuyen);\n  };\n\n  const {\n    values,\n    setValues,\n    errors,\n    setErrors,\n    handleInputChange,\n    resetForm\n  } = useForm(initialFValues, true, validate);\n  const map = [];\n\n  for (const key in selectThanhPho) {\n    if (selectThanhPho[key].name === currentTinh) {\n      map.push(selectThanhPho[key].province);\n    }\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (validate()) {\n      if (user === null) {\n        const formDataCheckout = new FormData();\n        formDataCheckout.append('idKhach', values.idKhach);\n        formDataCheckout.append('hoTen', values.hoTen);\n        formDataCheckout.append('diaChi', values.diaChi);\n        formDataCheckout.append('ghiChu', values.ghiChu);\n        formDataCheckout.append('sdt', values.sdt);\n        formDataCheckout.append('email', values.email);\n        formDataCheckout.append('tinh', currentTinh);\n        formDataCheckout.append('huyen', currentHuyen);\n\n        if (dataCart != null) {\n          for (const key of Object.keys(dataCart)) {\n            formDataCheckout.append('idSanPham', dataCart[key].id);\n            formDataCheckout.append('soLuong', dataCart[key].cartQuantity);\n            formDataCheckout.append('checkoutProduct', JSON.stringify(dataCart[key]));\n\n            if (dataCart[key].khuyenMaiNavigation.sale > 0) {\n              formDataCheckout.append('thanhTien', dataCart[key].giaKhuyenMai * dataCart[key].cartQuantity);\n            } else {\n              formDataCheckout.append('thanhTien', dataCart[key].giaSP * dataCart[key].cartQuantity);\n            }\n          }\n        } else {\n          formDataCheckout.append('idSanPham', dataCart[0].id);\n          formDataCheckout.append('soLuong', dataCart[0].cartQuantity);\n        }\n\n        formDataCheckout.append('tongHoaDon', [dataCarts.cartTotalAmount]);\n        formDataCheckout.append('tongLuongSanPham', [dataCarts.cartTotalQuantity]);\n        addOrEdit(formDataCheckout, resetForm);\n      } else {\n        const formDataCheckout = new FormData();\n        formDataCheckout.append('idKhach', user.idKhach);\n        formDataCheckout.append('hoTen', user.hoTen);\n        formDataCheckout.append('diaChi', user.diaChi);\n        formDataCheckout.append('ghiChu', values.ghiChu);\n        formDataCheckout.append('sdt', user.sdt);\n        formDataCheckout.append('email', user.email);\n\n        if (dataCart != null) {\n          for (const key of Object.keys(dataCart)) {\n            formDataCheckout.append('idSanPham', dataCart[key].id);\n            formDataCheckout.append('soLuong', dataCart[key].cartQuantity);\n            formDataCheckout.append('checkoutProduct', JSON.stringify(dataCart[key]));\n          }\n        } else {\n          formDataCheckout.append('idSanPham', dataCart[0].id);\n          formDataCheckout.append('soLuong', dataCart[0].cartQuantity);\n        }\n\n        formDataCheckout.append('tongHoaDon', [dataCarts.cartTotalAmount]);\n        formDataCheckout.append('tongLuongSanPham', [dataCarts.cartTotalQuantity]);\n        addOrEdit(formDataCheckout, resetForm);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    id: \"customer-form\",\n    onSubmit: handleSubmit,\n    className: \"js-customer-form\",\n    children: [user === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        name: \"id_customer\",\n        defaultValue: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group row\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control\",\n          name: \"hoTen\",\n          type: \"text\",\n          placeholder: \"Nh\\u1EADp h\\u1ECD v\\xE0 t\\xEAn\",\n          value: values.hoTen,\n          onChange: handleInputChange,\n          error: errors.hoTen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group row\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control\",\n          name: \"sdt\",\n          type: \"text\",\n          placeholder: \"Nh\\u1EADp S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n          value: values.sdt,\n          onChange: handleInputChange,\n          error: errors.sdt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group row\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control\",\n          name: \"email\",\n          type: \"text\",\n          placeholder: \"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 email\",\n          value: values.email,\n          onChange: handleInputChange,\n          error: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group row\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control\",\n          name: \"diaChi\",\n          type: \"text\",\n          placeholder: \"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 nh\\xE0, \\u0111\\u01B0\\u1EDDng, h\\u1EBBm\",\n          value: values.diaChi,\n          onChange: handleInputChange,\n          error: errors.diaChi\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 pl-0\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"custom-select\",\n            onChange: event => changeTinh(event.target.value),\n            value: currentTinh,\n            name: \"tinh\",\n            placeholder: \"T\\u1EC9nh / Th\\xE0nh ph\\u1ED1\",\n            children: selectThanhPho.map(item => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                selected: true,\n                value: item.name,\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 49\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 pr-0\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"custom-select\",\n            onChange: event => changeHuyen(event.target.value),\n            name: \"huyen\",\n            value: currentHuyen,\n            placeholder: \"Qu\\u1EADn / Huy\\u1EC7n\",\n            children: currentTinh === '' ? '' : map[0].map(item => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item.Name,\n                children: item.Name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 53\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"form-control\",\n        name: \"ghiChu\",\n        type: \"text\",\n        placeholder: \"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\",\n        value: values.ghiChu,\n        onChange: handleInputChange,\n        error: errors.ghiChu,\n        placeholder: \"Nh\\u1EADp ghi ch\\xFA\",\n        style: {\n          width: '570px',\n          marginLeft: '-16px'\n        },\n        rows: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"form-control\",\n      name: \"ghiChu\",\n      type: \"text\",\n      placeholder: \"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\",\n      value: values.ghiChu,\n      onChange: handleInputChange,\n      error: errors.ghiChu,\n      placeholder: \"Nh\\u1EADp ghi ch\\xFA\",\n      style: {\n        width: '570px',\n        marginLeft: '-16px'\n      },\n      rows: 5\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"clearfix\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          name: \"submitCreate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"continue btn btn-primary pull-xs-right\",\n          name: \"\\u0110\\u1EB7t h\\xE0ng\",\n          type: \"submit\",\n          children: \"\\u0110\\u1EB7t h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FormCheckout, \"GhZ8hYXBYod7s3Cf4Q9ccuFW45I=\", false, function () {\n  return [useSelector, useForm];\n});\n\n_c = FormCheckout;\nexport default FormCheckout;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormCheckout\");","map":{"version":3,"sources":["D:/DACS2 - DH18TIN03 - NguyenNhutThanh - 188672  Website_Ban_Do_Dung_Noi_That/doancoso2-client/src/Components/Checkout/FormCheckout.jsx"],"names":["React","useState","useEffect","useForm","Form","useSelector","initialFValues","idKhach","hoTen","sdt","diaChi","email","ghiChu","soLuong","thanhTien","idCheckout","idSanPham","tongHoaDon","tongLuongSanPham","checkoutProduct","tinh","huyen","FormCheckout","props","addOrEdit","selectThanhPho","dataCart","JSON","parse","localStorage","getItem","dataCarts","state","cart","user","validate","fieldValues","values","temp","errors","setErrors","Object","every","x","currentTinh","setCurrentTinh","changeTinh","newTinh","currentHuyen","setCurrentHuyen","changeHuyen","newHuyen","setValues","handleInputChange","resetForm","map","key","name","push","province","handleSubmit","e","preventDefault","formDataCheckout","FormData","append","keys","id","cartQuantity","stringify","khuyenMaiNavigation","sale","giaKhuyenMai","giaSP","cartTotalAmount","cartTotalQuantity","event","target","value","item","Name","width","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useForm, Form } from '../../../src/hooks/useForm';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst initialFValues = {\r\n    idKhach: 0,\r\n    hoTen: '',\r\n    sdt: '',\r\n    diaChi: '',\r\n    email: '',\r\n    ghiChu: '',\r\n    soLuong: 0,\r\n    thanhTien: 0,\r\n    idCheckout: 0,\r\n    idSanPham: 0,\r\n    tongHoaDon: 0,\r\n    tongLuongSanPham: 0,\r\n    checkoutProduct: [],\r\n    tinh: '',\r\n    huyen: '',\r\n}\r\n\r\nconst FormCheckout = (props) => {\r\n    const { addOrEdit, selectThanhPho } = props;\r\n    const dataCart = JSON.parse(localStorage.getItem(\"cartItems\"))\r\n    const dataCarts = useSelector((state) => state.cart)\r\n    const user = JSON.parse(localStorage.getItem(\"info_user\"))\r\n\r\n    const validate = (fieldValues = values) => {\r\n        let temp = { ...errors }\r\n        if (user === null) {\r\n            if ('hoTen' in fieldValues)\r\n                temp.hoTen = fieldValues.hoTen ? \"\" : \"This field is required.\"\r\n            if ('sdt' in fieldValues)\r\n                temp.sdt = fieldValues.sdt ? \"\" : \"This field is required.\"\r\n            if ('diaChi' in fieldValues)\r\n                temp.diaChi = fieldValues.diaChi ? \"\" : \"This field is required.\"\r\n            if ('email' in fieldValues)\r\n                temp.email = fieldValues.email ? \"\" : \"This field is required.\"\r\n        } else {\r\n            if ('ghiChu' in fieldValues)\r\n                temp.ghiChu = fieldValues.ghiChu ? \"\" : \"This field is required.\"\r\n        }\r\n        setErrors({\r\n            ...temp\r\n        })\r\n        if (fieldValues == values)\r\n            return Object.values(temp).every(x => x == \"\")\r\n    }\r\n\r\n    const [currentTinh, setCurrentTinh] = useState('')\r\n    const changeTinh = (newTinh) => {\r\n        setCurrentTinh(newTinh)\r\n    }\r\n\r\n    const [currentHuyen, setCurrentHuyen] = useState('')\r\n    const changeHuyen = (newHuyen) => {\r\n        setCurrentHuyen(newHuyen)\r\n    }\r\n    const {\r\n        values, setValues,\r\n        errors, setErrors,\r\n        handleInputChange,\r\n        resetForm\r\n    } = useForm(initialFValues, true, validate);\r\n\r\n    const map = [];\r\n    for (const key in selectThanhPho) {\r\n        if (selectThanhPho[key].name === currentTinh) {\r\n            map.push(selectThanhPho[key].province)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        if (validate()) {\r\n            if (user === null) {\r\n                const formDataCheckout = new FormData()\r\n                formDataCheckout.append('idKhach', values.idKhach)\r\n                formDataCheckout.append('hoTen', values.hoTen)\r\n                formDataCheckout.append('diaChi', values.diaChi)\r\n                formDataCheckout.append('ghiChu', values.ghiChu)\r\n                formDataCheckout.append('sdt', values.sdt)\r\n                formDataCheckout.append('email', values.email)\r\n                formDataCheckout.append('tinh', currentTinh)\r\n                formDataCheckout.append('huyen', currentHuyen)\r\n                if (dataCart != null) {\r\n                    for (const key of Object.keys(dataCart)) {\r\n                        formDataCheckout.append('idSanPham', dataCart[key].id)\r\n                        formDataCheckout.append('soLuong', dataCart[key].cartQuantity)\r\n                        formDataCheckout.append('checkoutProduct', JSON.stringify(dataCart[key]))\r\n                        if (dataCart[key].khuyenMaiNavigation.sale > 0) {\r\n                            formDataCheckout.append('thanhTien', dataCart[key].giaKhuyenMai * dataCart[key].cartQuantity)\r\n                        }\r\n                        else {\r\n                            formDataCheckout.append('thanhTien', dataCart[key].giaSP * dataCart[key].cartQuantity)\r\n                        }\r\n                    }\r\n                } else {\r\n                    formDataCheckout.append('idSanPham', dataCart[0].id)\r\n                    formDataCheckout.append('soLuong', dataCart[0].cartQuantity)\r\n                }\r\n                formDataCheckout.append('tongHoaDon', [dataCarts.cartTotalAmount])\r\n                formDataCheckout.append('tongLuongSanPham', [dataCarts.cartTotalQuantity])\r\n                addOrEdit(formDataCheckout, resetForm);\r\n            } else {\r\n                const formDataCheckout = new FormData()\r\n                formDataCheckout.append('idKhach', user.idKhach)\r\n                formDataCheckout.append('hoTen', user.hoTen)\r\n                formDataCheckout.append('diaChi', user.diaChi)\r\n                formDataCheckout.append('ghiChu', values.ghiChu)\r\n                formDataCheckout.append('sdt', user.sdt)\r\n                formDataCheckout.append('email', user.email)\r\n                if (dataCart != null) {\r\n                    for (const key of Object.keys(dataCart)) {\r\n                        formDataCheckout.append('idSanPham', dataCart[key].id)\r\n                        formDataCheckout.append('soLuong', dataCart[key].cartQuantity)\r\n                        formDataCheckout.append('checkoutProduct', JSON.stringify(dataCart[key]))\r\n                    }\r\n                } else {\r\n                    formDataCheckout.append('idSanPham', dataCart[0].id)\r\n                    formDataCheckout.append('soLuong', dataCart[0].cartQuantity)\r\n                }\r\n                formDataCheckout.append('tongHoaDon', [dataCarts.cartTotalAmount])\r\n                formDataCheckout.append('tongLuongSanPham', [dataCarts.cartTotalQuantity]\r\n                )\r\n                addOrEdit(formDataCheckout, resetForm);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <form id=\"customer-form\" onSubmit={handleSubmit} className=\"js-customer-form\" >\r\n            {\r\n                user === null ?\r\n                    <div>\r\n                        <input type=\"hidden\" name=\"id_customer\" defaultValue />\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"hoTen\" type=\"text\"\r\n                                placeholder=\"Nhập họ và tên\"\r\n                                value={values.hoTen}\r\n                                onChange={handleInputChange}\r\n                                error={errors.hoTen}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"sdt\" type=\"text\"\r\n                                placeholder=\"Nhập Số điện thoại\"\r\n                                value={values.sdt}\r\n                                onChange={handleInputChange}\r\n                                error={errors.sdt}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"email\" type=\"text\"\r\n                                placeholder=\"Nhập địa chỉ email\"\r\n                                value={values.email}\r\n                                onChange={handleInputChange}\r\n                                error={errors.email}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"diaChi\" type=\"text\"\r\n                                placeholder=\"Nhập địa chỉ nhà, đường, hẻm\"\r\n                                value={values.diaChi}\r\n                                onChange={handleInputChange}\r\n                                error={errors.diaChi}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <div className=\"col-md-6 pl-0\">\r\n                                <select className=\"custom-select\"\r\n                                    onChange={(event) => changeTinh(event.target.value)}\r\n                                    value={currentTinh}\r\n                                    name=\"tinh\"\r\n                                    placeholder=\"Tỉnh / Thành phố\">\r\n                                    {\r\n                                        selectThanhPho.map((item) => {\r\n                                            return (\r\n                                                <option selected value={item.name}>\r\n                                                    {item.name}\r\n                                                </option>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"col-md-6 pr-0\">\r\n                                <select className=\"custom-select\"\r\n                                    onChange={(event) => changeHuyen(event.target.value)}\r\n                                    name=\"huyen\"\r\n                                    value={currentHuyen}\r\n                                    placeholder=\"Quận / Huyện\">\r\n                                    {\r\n                                        currentTinh === '' ? '' :\r\n                                            map[0].map((item) => {\r\n                                                return (\r\n                                                    <option value={item.Name}>\r\n                                                        {item.Name}\r\n                                                    </option>\r\n                                                )\r\n                                            })\r\n                                    }\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <textarea\r\n                            className=\"form-control\"\r\n                            name=\"ghiChu\" type=\"text\"\r\n                            placeholder=\"Nhập địa chỉ\"\r\n                            value={values.ghiChu}\r\n                            onChange={handleInputChange}\r\n                            error={errors.ghiChu}\r\n                            placeholder=\"Nhập ghi chú\"\r\n                            style={{ width: '570px', marginLeft: '-16px' }}\r\n                            rows={5}\r\n                        />\r\n                    </div> :\r\n                    <textarea\r\n                        className=\"form-control\"\r\n                        name=\"ghiChu\" type=\"text\"\r\n                        placeholder=\"Nhập địa chỉ\"\r\n                        value={values.ghiChu}\r\n                        onChange={handleInputChange}\r\n                        error={errors.ghiChu}\r\n                        placeholder=\"Nhập ghi chú\"\r\n                        style={{ width: '570px', marginLeft: '-16px' }}\r\n                        rows={5}\r\n                    />\r\n            }\r\n\r\n            <div className=\"clearfix\">\r\n                <div className=\"row\">\r\n                    <input type=\"hidden\" name=\"submitCreate\" />\r\n                    <button className=\"continue btn btn-primary pull-xs-right\" name=\"Đặt hàng\" type=\"submit\">\r\n                        Đặt hàng\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default FormCheckout;"]},"metadata":{},"sourceType":"module"}