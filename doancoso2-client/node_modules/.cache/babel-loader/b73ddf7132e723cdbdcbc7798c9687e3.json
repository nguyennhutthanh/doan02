{"ast":null,"code":"import _defineProperty from\"E:/doan02/doancoso2-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"E:/doan02/doancoso2-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"E:/doan02/doancoso2-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect}from'react';import{useForm,Form}from'../../../src/hooks/useForm';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFValues={idKhach:0,hoTen:'',sdt:'',diaChi:'',email:'',ghiChu:'',soLuong:0,thanhTien:0,idCheckout:0,idSanPham:0,tongHoaDon:0,tongLuongSanPham:0,checkoutProduct:[],tinh:'',huyen:''};var FormCheckout=function FormCheckout(props){var _jsx2,_jsx3;var addOrEdit=props.addOrEdit,selectThanhPho=props.selectThanhPho;var dataCart=JSON.parse(localStorage.getItem(\"cartItems\"));var dataCarts=useSelector(function(state){return state.cart;});var user=JSON.parse(localStorage.getItem(\"info_user\"));var validate=function validate(){var fieldValues=arguments.length>0&&arguments[0]!==undefined?arguments[0]:values;var temp=_objectSpread({},errors);if(user===null){if('hoTen'in fieldValues)temp.hoTen=fieldValues.hoTen?\"\":\"This field is required.\";if('sdt'in fieldValues)temp.sdt=fieldValues.sdt?\"\":\"This field is required.\";if('diaChi'in fieldValues)temp.diaChi=fieldValues.diaChi?\"\":\"This field is required.\";if('email'in fieldValues)temp.email=fieldValues.email?\"\":\"This field is required.\";}else{if('ghiChu'in fieldValues)temp.ghiChu=fieldValues.ghiChu?\"\":\"This field is required.\";}setErrors(_objectSpread({},temp));if(fieldValues==values)return Object.values(temp).every(function(x){return x==\"\";});};var _useState=useState(''),_useState2=_slicedToArray(_useState,2),currentTinh=_useState2[0],setCurrentTinh=_useState2[1];var changeTinh=function changeTinh(newTinh){setCurrentTinh(newTinh);};var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),currentHuyen=_useState4[0],setCurrentHuyen=_useState4[1];var changeHuyen=function changeHuyen(newHuyen){setCurrentHuyen(newHuyen);};var _useForm=useForm(initialFValues,true,validate),values=_useForm.values,setValues=_useForm.setValues,errors=_useForm.errors,setErrors=_useForm.setErrors,handleInputChange=_useForm.handleInputChange,resetForm=_useForm.resetForm;var map=[];for(var key in selectThanhPho){if(selectThanhPho[key].name===currentTinh){map.push(selectThanhPho[key].province);}}var handleSubmit=function handleSubmit(e){e.preventDefault();if(validate()){if(user===null){var formDataCheckout=new FormData();formDataCheckout.append('idKhach',values.idKhach);formDataCheckout.append('hoTen',values.hoTen);formDataCheckout.append('diaChi',values.diaChi);formDataCheckout.append('ghiChu',values.ghiChu);formDataCheckout.append('sdt',values.sdt);formDataCheckout.append('email',values.email);formDataCheckout.append('tinh',currentTinh);formDataCheckout.append('huyen',currentHuyen);if(dataCart!=null){for(var _i=0,_Object$keys=Object.keys(dataCart);_i<_Object$keys.length;_i++){var _key=_Object$keys[_i];formDataCheckout.append('idSanPham',dataCart[_key].id);formDataCheckout.append('soLuong',dataCart[_key].cartQuantity);formDataCheckout.append('checkoutProduct',JSON.stringify(dataCart[_key]));if(dataCart[_key].khuyenMaiNavigation.sale>0){formDataCheckout.append('thanhTien',dataCart[_key].giaKhuyenMai*dataCart[_key].cartQuantity);}else{formDataCheckout.append('thanhTien',dataCart[_key].giaSP*dataCart[_key].cartQuantity);}}}else{formDataCheckout.append('idSanPham',dataCart[0].id);formDataCheckout.append('soLuong',dataCart[0].cartQuantity);}formDataCheckout.append('tongHoaDon',[dataCarts.cartTotalAmount]);formDataCheckout.append('tongLuongSanPham',[dataCarts.cartTotalQuantity]);addOrEdit(formDataCheckout,resetForm);}else{var _formDataCheckout=new FormData();_formDataCheckout.append('idKhach',user.idKhach);_formDataCheckout.append('hoTen',user.hoTen);_formDataCheckout.append('diaChi',user.diaChi);_formDataCheckout.append('ghiChu',values.ghiChu);_formDataCheckout.append('sdt',user.sdt);_formDataCheckout.append('email',user.email);if(dataCart!=null){for(var _i2=0,_Object$keys2=Object.keys(dataCart);_i2<_Object$keys2.length;_i2++){var _key2=_Object$keys2[_i2];_formDataCheckout.append('idSanPham',dataCart[_key2].id);_formDataCheckout.append('soLuong',dataCart[_key2].cartQuantity);_formDataCheckout.append('checkoutProduct',JSON.stringify(dataCart[_key2]));}}else{_formDataCheckout.append('idSanPham',dataCart[0].id);_formDataCheckout.append('soLuong',dataCart[0].cartQuantity);}_formDataCheckout.append('tongHoaDon',[dataCarts.cartTotalAmount]);_formDataCheckout.append('tongLuongSanPham',[dataCarts.cartTotalQuantity]);addOrEdit(_formDataCheckout,resetForm);}}};return/*#__PURE__*/_jsxs(\"form\",{id:\"customer-form\",onSubmit:handleSubmit,className:\"js-customer-form\",children:[user===null?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"id_customer\",defaultValue:true}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group row\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"hoTen\",type:\"text\",placeholder:\"Nh\\u1EADp h\\u1ECD v\\xE0 t\\xEAn\",value:values.hoTen,onChange:handleInputChange,error:errors.hoTen})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group row\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"sdt\",type:\"text\",placeholder:\"Nh\\u1EADp S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",value:values.sdt,onChange:handleInputChange,error:errors.sdt})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group row\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"email\",type:\"text\",placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 email\",value:values.email,onChange:handleInputChange,error:errors.email})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group row\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"diaChi\",type:\"text\",placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 nh\\xE0, \\u0111\\u01B0\\u1EDDng, h\\u1EBBm\",value:values.diaChi,onChange:handleInputChange,error:errors.diaChi})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 pl-0\",children:/*#__PURE__*/_jsx(\"select\",{className:\"custom-select\",onChange:function onChange(event){return changeTinh(event.target.value);},value:currentTinh,name:\"tinh\",placeholder:\"T\\u1EC9nh / Th\\xE0nh ph\\u1ED1\",children:selectThanhPho.map(function(item){return/*#__PURE__*/_jsx(\"option\",{selected:true,value:item.name,children:item.name});})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 pr-0\",children:/*#__PURE__*/_jsx(\"select\",{className:\"custom-select\",onChange:function onChange(event){return changeHuyen(event.target.value);},name:\"huyen\",value:currentHuyen,placeholder:\"Qu\\u1EADn / Huy\\u1EC7n\",children:currentTinh===''?'':map[0].map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.Name,children:item.Name});})})})]}),/*#__PURE__*/_jsx(\"textarea\",(_jsx2={className:\"form-control\",name:\"ghiChu\",type:\"text\",placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\",value:values.ghiChu,onChange:handleInputChange,error:errors.ghiChu},_defineProperty(_jsx2,\"placeholder\",\"Nh\\u1EADp ghi ch\\xFA\"),_defineProperty(_jsx2,\"style\",{width:'570px',marginLeft:'-16px'}),_defineProperty(_jsx2,\"rows\",5),_jsx2))]}):/*#__PURE__*/_jsx(\"textarea\",(_jsx3={className:\"form-control\",name:\"ghiChu\",type:\"text\",placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\",value:values.ghiChu,onChange:handleInputChange,error:errors.ghiChu},_defineProperty(_jsx3,\"placeholder\",\"Nh\\u1EADp ghi ch\\xFA\"),_defineProperty(_jsx3,\"style\",{width:'570px',marginLeft:'-16px'}),_defineProperty(_jsx3,\"rows\",5),_jsx3)),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"submitCreate\"}),/*#__PURE__*/_jsx(\"button\",{className:\"continue btn btn-primary pull-xs-right\",name:\"\\u0110\\u1EB7t h\\xE0ng\",type:\"submit\",children:\"\\u0110\\u1EB7t h\\xE0ng\"})]})})]});};export default FormCheckout;","map":{"version":3,"sources":["E:/doan02/doancoso2-client/src/Components/Checkout/FormCheckout.jsx"],"names":["React","useState","useEffect","useForm","Form","useSelector","initialFValues","idKhach","hoTen","sdt","diaChi","email","ghiChu","soLuong","thanhTien","idCheckout","idSanPham","tongHoaDon","tongLuongSanPham","checkoutProduct","tinh","huyen","FormCheckout","props","addOrEdit","selectThanhPho","dataCart","JSON","parse","localStorage","getItem","dataCarts","state","cart","user","validate","fieldValues","values","temp","errors","setErrors","Object","every","x","currentTinh","setCurrentTinh","changeTinh","newTinh","currentHuyen","setCurrentHuyen","changeHuyen","newHuyen","setValues","handleInputChange","resetForm","map","key","name","push","province","handleSubmit","e","preventDefault","formDataCheckout","FormData","append","keys","id","cartQuantity","stringify","khuyenMaiNavigation","sale","giaKhuyenMai","giaSP","cartTotalAmount","cartTotalQuantity","event","target","value","item","Name","width","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useForm, Form } from '../../../src/hooks/useForm';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst initialFValues = {\r\n    idKhach: 0,\r\n    hoTen: '',\r\n    sdt: '',\r\n    diaChi: '',\r\n    email: '',\r\n    ghiChu: '',\r\n    soLuong: 0,\r\n    thanhTien: 0,\r\n    idCheckout: 0,\r\n    idSanPham: 0,\r\n    tongHoaDon: 0,\r\n    tongLuongSanPham: 0,\r\n    checkoutProduct: [],\r\n    tinh: '',\r\n    huyen: '',\r\n}\r\n\r\nconst FormCheckout = (props) => {\r\n    const { addOrEdit, selectThanhPho } = props;\r\n    const dataCart = JSON.parse(localStorage.getItem(\"cartItems\"))\r\n    const dataCarts = useSelector((state) => state.cart)\r\n    const user = JSON.parse(localStorage.getItem(\"info_user\"))\r\n\r\n    const validate = (fieldValues = values) => {\r\n        let temp = { ...errors }\r\n        if (user === null) {\r\n            if ('hoTen' in fieldValues)\r\n                temp.hoTen = fieldValues.hoTen ? \"\" : \"This field is required.\"\r\n            if ('sdt' in fieldValues)\r\n                temp.sdt = fieldValues.sdt ? \"\" : \"This field is required.\"\r\n            if ('diaChi' in fieldValues)\r\n                temp.diaChi = fieldValues.diaChi ? \"\" : \"This field is required.\"\r\n            if ('email' in fieldValues)\r\n                temp.email = fieldValues.email ? \"\" : \"This field is required.\"\r\n        } else {\r\n            if ('ghiChu' in fieldValues)\r\n                temp.ghiChu = fieldValues.ghiChu ? \"\" : \"This field is required.\"\r\n        }\r\n        setErrors({\r\n            ...temp\r\n        })\r\n        if (fieldValues == values)\r\n            return Object.values(temp).every(x => x == \"\")\r\n    }\r\n\r\n    const [currentTinh, setCurrentTinh] = useState('')\r\n    const changeTinh = (newTinh) => {\r\n        setCurrentTinh(newTinh)\r\n    }\r\n\r\n    const [currentHuyen, setCurrentHuyen] = useState('')\r\n    const changeHuyen = (newHuyen) => {\r\n        setCurrentHuyen(newHuyen)\r\n    }\r\n    const {\r\n        values, setValues,\r\n        errors, setErrors,\r\n        handleInputChange,\r\n        resetForm\r\n    } = useForm(initialFValues, true, validate);\r\n\r\n    const map = [];\r\n    for (const key in selectThanhPho) {\r\n        if (selectThanhPho[key].name === currentTinh) {\r\n            map.push(selectThanhPho[key].province)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        if (validate()) {\r\n            if (user === null) {\r\n                const formDataCheckout = new FormData()\r\n                formDataCheckout.append('idKhach', values.idKhach)\r\n                formDataCheckout.append('hoTen', values.hoTen)\r\n                formDataCheckout.append('diaChi', values.diaChi)\r\n                formDataCheckout.append('ghiChu', values.ghiChu)\r\n                formDataCheckout.append('sdt', values.sdt)\r\n                formDataCheckout.append('email', values.email)\r\n                formDataCheckout.append('tinh', currentTinh)\r\n                formDataCheckout.append('huyen', currentHuyen)\r\n                if (dataCart != null) {\r\n                    for (const key of Object.keys(dataCart)) {\r\n                        formDataCheckout.append('idSanPham', dataCart[key].id)\r\n                        formDataCheckout.append('soLuong', dataCart[key].cartQuantity)\r\n                        formDataCheckout.append('checkoutProduct', JSON.stringify(dataCart[key]))\r\n                        if (dataCart[key].khuyenMaiNavigation.sale > 0) {\r\n                            formDataCheckout.append('thanhTien', dataCart[key].giaKhuyenMai * dataCart[key].cartQuantity)\r\n                        }\r\n                        else {\r\n                            formDataCheckout.append('thanhTien', dataCart[key].giaSP * dataCart[key].cartQuantity)\r\n                        }\r\n                    }\r\n                } else {\r\n                    formDataCheckout.append('idSanPham', dataCart[0].id)\r\n                    formDataCheckout.append('soLuong', dataCart[0].cartQuantity)\r\n                }\r\n                formDataCheckout.append('tongHoaDon', [dataCarts.cartTotalAmount])\r\n                formDataCheckout.append('tongLuongSanPham', [dataCarts.cartTotalQuantity])\r\n                addOrEdit(formDataCheckout, resetForm);\r\n            } else {\r\n                const formDataCheckout = new FormData()\r\n                formDataCheckout.append('idKhach', user.idKhach)\r\n                formDataCheckout.append('hoTen', user.hoTen)\r\n                formDataCheckout.append('diaChi', user.diaChi)\r\n                formDataCheckout.append('ghiChu', values.ghiChu)\r\n                formDataCheckout.append('sdt', user.sdt)\r\n                formDataCheckout.append('email', user.email)\r\n                if (dataCart != null) {\r\n                    for (const key of Object.keys(dataCart)) {\r\n                        formDataCheckout.append('idSanPham', dataCart[key].id)\r\n                        formDataCheckout.append('soLuong', dataCart[key].cartQuantity)\r\n                        formDataCheckout.append('checkoutProduct', JSON.stringify(dataCart[key]))\r\n                    }\r\n                } else {\r\n                    formDataCheckout.append('idSanPham', dataCart[0].id)\r\n                    formDataCheckout.append('soLuong', dataCart[0].cartQuantity)\r\n                }\r\n                formDataCheckout.append('tongHoaDon', [dataCarts.cartTotalAmount])\r\n                formDataCheckout.append('tongLuongSanPham', [dataCarts.cartTotalQuantity]\r\n                )\r\n                addOrEdit(formDataCheckout, resetForm);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <form id=\"customer-form\" onSubmit={handleSubmit} className=\"js-customer-form\" >\r\n            {\r\n                user === null ?\r\n                    <div>\r\n                        <input type=\"hidden\" name=\"id_customer\" defaultValue />\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"hoTen\" type=\"text\"\r\n                                placeholder=\"Nhập họ và tên\"\r\n                                value={values.hoTen}\r\n                                onChange={handleInputChange}\r\n                                error={errors.hoTen}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"sdt\" type=\"text\"\r\n                                placeholder=\"Nhập Số điện thoại\"\r\n                                value={values.sdt}\r\n                                onChange={handleInputChange}\r\n                                error={errors.sdt}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"email\" type=\"text\"\r\n                                placeholder=\"Nhập địa chỉ email\"\r\n                                value={values.email}\r\n                                onChange={handleInputChange}\r\n                                error={errors.email}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"diaChi\" type=\"text\"\r\n                                placeholder=\"Nhập địa chỉ nhà, đường, hẻm\"\r\n                                value={values.diaChi}\r\n                                onChange={handleInputChange}\r\n                                error={errors.diaChi}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group row\">\r\n                            <div className=\"col-md-6 pl-0\">\r\n                                <select className=\"custom-select\"\r\n                                    onChange={(event) => changeTinh(event.target.value)}\r\n                                    value={currentTinh}\r\n                                    name=\"tinh\"\r\n                                    placeholder=\"Tỉnh / Thành phố\">\r\n                                    {\r\n                                        selectThanhPho.map((item) => {\r\n                                            return (\r\n                                                <option selected value={item.name}>\r\n                                                    {item.name}\r\n                                                </option>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"col-md-6 pr-0\">\r\n                                <select className=\"custom-select\"\r\n                                    onChange={(event) => changeHuyen(event.target.value)}\r\n                                    name=\"huyen\"\r\n                                    value={currentHuyen}\r\n                                    placeholder=\"Quận / Huyện\">\r\n                                    {\r\n                                        currentTinh === '' ? '' :\r\n                                            map[0].map((item) => {\r\n                                                return (\r\n                                                    <option value={item.Name}>\r\n                                                        {item.Name}\r\n                                                    </option>\r\n                                                )\r\n                                            })\r\n                                    }\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <textarea\r\n                            className=\"form-control\"\r\n                            name=\"ghiChu\" type=\"text\"\r\n                            placeholder=\"Nhập địa chỉ\"\r\n                            value={values.ghiChu}\r\n                            onChange={handleInputChange}\r\n                            error={errors.ghiChu}\r\n                            placeholder=\"Nhập ghi chú\"\r\n                            style={{ width: '570px', marginLeft: '-16px' }}\r\n                            rows={5}\r\n                        />\r\n                    </div> :\r\n                    <textarea\r\n                        className=\"form-control\"\r\n                        name=\"ghiChu\" type=\"text\"\r\n                        placeholder=\"Nhập địa chỉ\"\r\n                        value={values.ghiChu}\r\n                        onChange={handleInputChange}\r\n                        error={errors.ghiChu}\r\n                        placeholder=\"Nhập ghi chú\"\r\n                        style={{ width: '570px', marginLeft: '-16px' }}\r\n                        rows={5}\r\n                    />\r\n            }\r\n\r\n            <div className=\"clearfix\">\r\n                <div className=\"row\">\r\n                    <input type=\"hidden\" name=\"submitCreate\" />\r\n                    <button className=\"continue btn btn-primary pull-xs-right\" name=\"Đặt hàng\" type=\"submit\">\r\n                        Đặt hàng\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default FormCheckout;"]},"metadata":{},"sourceType":"module"}