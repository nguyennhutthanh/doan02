{"ast":null,"code":"import _regeneratorRuntime from\"E:/doan02/doancoso2-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/doan02/doancoso2-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/doan02/doancoso2-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import FormCheckout from'./FormCheckout';import{createAPI,MapAPI}from\"../../../src/api/index\";import{toast}from\"react-toastify\";import{useSelector,useDispatch}from'react-redux';import{formatNumber}from'../../Common/index';import{useHistory}from\"react-router-dom\";import Login from'../User/Login';import{setUserAccount}from'../../redux/actions/productActions';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Checkout=function Checkout(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),checkout=_useState2[0],setCheckout=_useState2[1];var dataCart=JSON.parse(localStorage.getItem(\"cartItems\"));var state=useSelector(function(state){return state.cart.cartItems;});var cart=useSelector(function(state){return state.cart;});var user=JSON.parse(localStorage.getItem(\"info_user\"));var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tinhThanhPho=_useState4[0],settinhThanhPho=_useState4[1];var listtinhthanh=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,listTinh;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://localhost:44336/ApiTinhThanhPho/data.json\").catch(function(err){return console.error(err);});case 2:response=_context.sent;listTinh=response.data.map(function(item){return{id:item.Id,name:item.Name,province:item.Districts};});settinhThanhPho(listTinh);case 5:case\"end\":return _context.stop();}}},_callee);}));return function listtinhthanh(){return _ref.apply(this,arguments);};}();useEffect(function(){listtinhthanh();},[]);var history=useHistory();var dispatch=useDispatch();var cartTotalAmount=cart.cartTotalAmount,cartTotalQuantity=cart.cartTotalQuantity;var CheckoutMap=function CheckoutMap(formDataCheckout,resetForm){// chưa đăng nhập\nif(user===null){if(formDataCheckout.get('idKhach')==0)createAPI(MapAPI.CHECKOUT+\"/CheckoutNotAccount\").create(formDataCheckout).then(function(res){toast.success(\"\\u0111\\u1EB7t h\\xE0ng th\\xE0nh c\\xF4ng\",{position:\"top-right\"});console.log(\"data: \",formDataCheckout);}).catch(function(err){return console.log(err);});history.push(\"/Success\");resetForm();}else{createAPI(MapAPI.CHECKOUT+\"/CheckoutAccount\").create(formDataCheckout).then(function(res){toast.success(\"\\u0111\\u1EB7t h\\xE0ng th\\xE0nh c\\xF4ng\",{position:\"top-right\"});console.log(\"data: \",formDataCheckout);}).catch(function(err){return console.log(err);});history.push(\"/Success\");resetForm();}};var UserLogin=function UserLogin(FormUser){createAPI(MapAPI.USERACCOUNT+\"/SignInUser\").create(FormUser).then(function(res){toast.success(\"\\u0110\\u0103ng nh\\u1EADp th\\xE0nh c\\xF4ng\",{position:\"top-right\"});localStorage.setItem(\"info_user\",JSON.stringify(res.data));dispatch(setUserAccount(res.data));history.push(\"/Checkout\");}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"product-checkout checkout-cart\",children:/*#__PURE__*/_jsx(\"div\",{id:\"checkout\",className:\"main-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"wrap-banner\",children:/*#__PURE__*/_jsx(\"div\",{id:\"wrapper-site\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{maxWidth:'90%',margin:'0 auto',marginTop:'70px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{id:\"content-wrapper\",className:\"col-xs-12 col-sm-12 col-md-12 col-lg-12 onecol\",children:/*#__PURE__*/_jsx(\"div\",{id:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-grid row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9 check-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"checkout-personal-step\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"step-title h3 info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"step-number\",children:\"1\"}),\"Th\\xF4ng tin c\\xE1 nh\\xE2n\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-inline\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link active\",\"data-toggle\":\"tab\",href:\"#checkout-guest-form\",children:\"\\u0110\\u1EB7t h\\xE0ng nh\\u01B0 kh\\xE1ch\"})}),user===null?/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link\",\"data-toggle\":\"tab\",href:\"#checkout-login-form\",children:\"\\u0110\\u0103ng nh\\u1EADp\"})}):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",style:{marginTop:'0px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade in active show\",id:\"checkout-guest-form\",role:\"tabpanel\",children:/*#__PURE__*/_jsx(FormCheckout,{addOrEdit:CheckoutMap,selectThanhPho:tinhThanhPho})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade\",id:\"checkout-login-form\",role:\"tabpanel\",children:/*#__PURE__*/_jsx(Login,{UserLogin:UserLogin})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-grid-right col-xs-12 col-lg-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-summary\",style:{borderRadius:'6px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-detailed-totals\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-summary-products\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-label text-center\",children:[\"C\\xF3 \",state.length,\" s\\u1EA3n ph\\u1EA9m trong gi\\u1ECF h\\xE0ng\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-summary-line\",id:\"cart-subtotal-products\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label js-subtotal\",children:\"T\\u1ED5ng \\u0111\\u01A1n :\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\" \",formatNumber(cartTotalAmount),\" VN\\u0110\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-summary-line\",id:\"cart-subtotal-shipping\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"S\\u1ED1 l\\u01B0\\u1EE3ng s\\u1EA3n ph\\u1EA9m :\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:cartTotalQuantity}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"value\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"block-reassurance\",style:{borderRadius:'6px',marginTop:'15px'},children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"block-reassurance-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"img/product/check1.png\",alt:\"Security policy (edit with Customer reassurance module)\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Ch\\xEDnh s\\xE1ch b\\u1EA3o m\\u1EADt (\\u0111\\xF3ng g\\xF3i c\\u1EA9n th\\u1EADn c\\xF3 ni\\xEAm phong c\\u1EE7a shop)\"})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"block-reassurance-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"img/product/check2.png\",alt:\"Delivery policy (edit with Customer reassurance module)\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Ch\\xEDnh s\\xE1ch giao h\\xE0ng (giao h\\xE0ng t\\u1EADn n\\u01A1i, ph\\u1EE5c v\\u1EE5 t\\u1EADn t\\xECnh)\"})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"block-reassurance-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"img/product/check3.png\",alt:\"Return policy (edit with Customer reassurance module)\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Ch\\xEDnh s\\xE1ch ho\\xE0n tr\\u1EA3 (kh\\xF4ng v\\u1EEBa \\xFD ho\\u1EB7c do l\\u1ED7i c\\u1EE7a nh\\xE0 s\\u1EA3n ph\\u1EA9m 1 \\u0111\\u1ED5i 1)\"})]})})]})})]})]})})})})})})})})});};export default Checkout;","map":{"version":3,"sources":["E:/doan02/doancoso2-client/src/Components/Checkout/Checkout.jsx"],"names":["React","useState","useEffect","FormCheckout","createAPI","MapAPI","toast","useSelector","useDispatch","formatNumber","useHistory","Login","setUserAccount","axios","Checkout","checkout","setCheckout","dataCart","JSON","parse","localStorage","getItem","state","cart","cartItems","user","tinhThanhPho","settinhThanhPho","listtinhthanh","get","catch","err","console","error","response","listTinh","data","map","item","id","Id","name","Name","province","Districts","history","dispatch","cartTotalAmount","cartTotalQuantity","CheckoutMap","formDataCheckout","resetForm","CHECKOUT","create","then","res","success","position","log","push","UserLogin","FormUser","USERACCOUNT","setItem","stringify","maxWidth","margin","marginTop","borderRadius","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport FormCheckout from './FormCheckout';\r\nimport { createAPI, MapAPI } from \"../../../src/api/index\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { formatNumber } from '../../Common/index';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Login from '../User/Login';\r\nimport { setUserAccount } from '../../redux/actions/productActions';\r\nimport axios from 'axios';\r\n\r\nconst Checkout = () => {\r\n  const [checkout, setCheckout] = useState([])\r\n  const dataCart = JSON.parse(localStorage.getItem(\"cartItems\"))\r\n  const state = useSelector((state) => state.cart.cartItems);\r\n  const cart = useSelector((state) => state.cart);\r\n  const user = JSON.parse(localStorage.getItem(\"info_user\"))\r\n\r\n  const [tinhThanhPho, settinhThanhPho] = useState([])\r\n\r\n  const listtinhthanh = async () => {\r\n    const response = await axios.get(\"https://localhost:44336/ApiTinhThanhPho/data.json\").catch(err => console.error(err));\r\n    let listTinh = response.data.map(item => ({\r\n      id: item.Id,\r\n      name: item.Name,\r\n      province: item.Districts\r\n    }));\r\n    settinhThanhPho(listTinh);\r\n  }\r\n\r\n  useEffect(() => {\r\n    listtinhthanh();\r\n  }, []);\r\n\r\n  let history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { cartTotalAmount, cartTotalQuantity } = cart;\r\n\r\n  const CheckoutMap = (formDataCheckout, resetForm) => {\r\n    // chưa đăng nhập\r\n    if (user === null) {\r\n      if (formDataCheckout.get('idKhach') == 0)\r\n        createAPI(MapAPI.CHECKOUT + \"/CheckoutNotAccount\").create(formDataCheckout)\r\n          .then(res => {\r\n            toast.success(`đặt hàng thành công`, {\r\n              position: \"top-right\",\r\n            });\r\n            console.log(\"data: \", formDataCheckout);\r\n          }).catch(err => console.log(err))\r\n      history.push(\"/Success\");\r\n      resetForm()\r\n    }\r\n    else {\r\n      createAPI(MapAPI.CHECKOUT + \"/CheckoutAccount\").create(formDataCheckout)\r\n        .then(res => {\r\n          toast.success(`đặt hàng thành công`, {\r\n            position: \"top-right\",\r\n          });\r\n          console.log(\"data: \", formDataCheckout);\r\n        }).catch(err => console.log(err))\r\n      history.push(\"/Success\");\r\n      resetForm()\r\n    }\r\n  }\r\n\r\n  const UserLogin = (FormUser) => {\r\n    createAPI(MapAPI.USERACCOUNT + \"/SignInUser\").create(FormUser)\r\n      .then(res => {\r\n        toast.success(`Đăng nhập thành công`, {\r\n          position: \"top-right\",\r\n        });\r\n        localStorage.setItem(\"info_user\", JSON.stringify(res.data));\r\n        dispatch(setUserAccount(res.data));\r\n        history.push(\"/Checkout\")\r\n      }).catch(err => console.log(err))\r\n  }\r\n\r\n  return (\r\n    <div className=\"product-checkout checkout-cart\">\r\n      <div id=\"checkout\" className=\"main-content\">\r\n        <div className=\"wrap-banner\">\r\n          {/* main */}\r\n          <div id=\"wrapper-site\">\r\n            <div className=\"container\" style={{ maxWidth: '90%', margin: '0 auto', marginTop: '70px' }}>\r\n              <div className=\"row\">\r\n                <div id=\"content-wrapper\" className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12 onecol\">\r\n                  <div id=\"main\">\r\n                    <div className=\"cart-grid row\">\r\n                      <div className=\"col-md-9 check-info\">\r\n                        <div className=\"checkout-personal-step\">\r\n                          <h3 className=\"step-title h3 info\">\r\n                            <span className=\"step-number\">1</span>Thông tin cá nhân\r\n                          </h3>\r\n                        </div>\r\n                        <div className=\"content\">\r\n                          <ul className=\"nav nav-inline\">\r\n                            <li className=\"nav-item\">\r\n                              <a className=\"nav-link active\" data-toggle=\"tab\" href=\"#checkout-guest-form\">\r\n                                Đặt hàng như khách\r\n                              </a>\r\n                            </li>\r\n                            {user === null ? <li className=\"nav-item\">\r\n                              <a className=\"nav-link\" data-toggle=\"tab\" href=\"#checkout-login-form\">\r\n                                Đăng nhập\r\n                              </a>\r\n                            </li> : \"\"}\r\n                          </ul>\r\n                          <div className=\"tab-content\" style={{ marginTop: '0px' }}>\r\n                            <div className=\"tab-pane fade in active show\" id=\"checkout-guest-form\" role=\"tabpanel\">\r\n                              <FormCheckout addOrEdit={CheckoutMap} selectThanhPho={tinhThanhPho} />\r\n                            </div>\r\n                            <div className=\"tab-pane fade\" id=\"checkout-login-form\" role=\"tabpanel\">\r\n                              <Login UserLogin={UserLogin} />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"cart-grid-right col-xs-12 col-lg-3\">\r\n                        <div className=\"cart-summary\"\r\n                          style={{ borderRadius: '6px' }}\r\n                        >\r\n                          <div className=\"cart-detailed-totals\">\r\n                            <div className=\"cart-summary-products\">\r\n                              <div className=\"summary-label text-center\">Có {state.length} sản phẩm trong giỏ hàng</div>\r\n                            </div>\r\n                            <div className=\"cart-summary-line\" id=\"cart-subtotal-products\">\r\n                              <span className=\"label js-subtotal\">\r\n                                Tổng đơn :\r\n                              </span>\r\n                              <span className=\"value\"> {formatNumber(cartTotalAmount)} VNĐ</span>\r\n                            </div>\r\n                            <div className=\"cart-summary-line\" id=\"cart-subtotal-shipping\">\r\n                              <span className=\"label\">\r\n                                Số lượng sản phẩm :\r\n                              </span>\r\n                              <span className=\"value\">{cartTotalQuantity}</span>\r\n                              <div>\r\n                                <small className=\"value\" />\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div id=\"block-reassurance\"\r\n                          style={{\r\n                            borderRadius: '6px', marginTop: '15px'\r\n                          }}>\r\n                          <ul>\r\n                            <li>\r\n                              <div className=\"block-reassurance-item\">\r\n                                <img src=\"img/product/check1.png\" alt=\"Security policy (edit with Customer reassurance module)\" />\r\n                                <span>Chính sách bảo mật (đóng gói cẩn thận có niêm phong của shop)</span>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div className=\"block-reassurance-item\">\r\n                                <img src=\"img/product/check2.png\" alt=\"Delivery policy (edit with Customer reassurance module)\" />\r\n                                <span>Chính sách giao hàng (giao hàng tận nơi, phục vụ tận tình)</span>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div className=\"block-reassurance-item\">\r\n                                <img src=\"img/product/check3.png\" alt=\"Return policy (edit with Customer reassurance module)\" />\r\n                                <span>Chính sách hoàn trả (không vừa ý hoặc do lỗi của nhà sản phẩm 1 đổi 1)</span>\r\n                              </div>\r\n                            </li>\r\n                          </ul>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;"]},"metadata":{},"sourceType":"module"}